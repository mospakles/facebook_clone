var y=o=>new Promise(t=>setTimeout(t,o)),c=new Set,n,d=class{constructor(t,r={}){let{timeout:l=0,action:a,type:e="default",cancel:i}=r;this.message=t,this.options={timeout:l,action:a,type:e,cancel:i},this.setContainer(),this.insert(),c.add(this)}insert(){let t=document.createElement("div");t.className="toast",t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-hidden","false");let{action:r,type:l,cancel:a}=this.options,e=document.createElement("div");e.className="toast-inner";let i=document.createElement("div");if(i.className="toast-text",e.classList.add(l),typeof this.message=="string"?i.textContent=this.message:i.appendChild(this.message),e.appendChild(i),a){let s=document.createElement("button");s.className="toast-button cancel-button",s.textContent=a,s.type="text",s.onclick=()=>this.destroy(),e.appendChild(s)}if(r){let s=document.createElement("button");s.className="toast-button",s.textContent=r.text,s.type="text",s.onclick=()=>{this.stopTimer(),r.callback?r.callback(this):this.destroy()},e.appendChild(s)}t.appendChild(e),this.startTimer(),this.el=t,n.appendChild(t),y(50).then(m)}destroy(){let{el:t}=this;t&&(t.style.opacity="0",t.style.visibility="hidden",t.style.transform="translateY(10px)",this.stopTimer(),setTimeout(()=>{n.removeChild(t),c.delete(this),m()},150))}destory(){p("destory"),this.destroy()}setContainer(){n=document.querySelector(".toast-container"),n||(n=document.createElement("div"),n.className="toast-container",document.body.appendChild(n)),n.addEventListener("mouseenter",()=>{c.forEach(t=>t.stopTimer())}),n.addEventListener("mouseleave",()=>{c.forEach(t=>t.startTimer())})}startTimer(){this.options.timeout&&!this.timeoutId&&(this.timeoutId=self.setTimeout(()=>this.destroy(),this.options.timeout))}stopTimer(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}};function x(o,t){return new d(o,t)}function f(){n&&c.forEach(o=>{o.destroy()})}function b(){p("destoryAllToasts"),f()}function m(){let o=Array.from(c).reverse().slice(0,4),t=[];o.forEach((r,l)=>{let a=l+1,e=r.el,i=+(e.getAttribute("data-height")||0)||e.clientHeight;if(t.push(i),e.className=`toast toast-${a}`,e.dataset.height=`${i}`,e.style.setProperty("--index",`${a}`),e.style.setProperty("--height",`${i}px`),e.style.setProperty("--front-height",`${t[0]}px`),a>1){let s=t.slice(0,a-1).reduce((h,u)=>h+=u,0);e.style.setProperty("--hover-offset-y",`-${s}px`)}else e.style.removeProperty("--hover-offset-y")})}function p(o){console.warn("[vercel-toast]:",`\`${o}\` is a typo function, please use \`${o.replace("or","ro")}\``)}export{d as Toast,x as createToast,b as destoryAllToasts,f as destroyAllToasts};
